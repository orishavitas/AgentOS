# Design Guide — AgentOS Templates & Generated Projects

**Version:** 1.0  
**Last updated:** 2026-01-28  
**Applies to:** AgentOS repo templates + any project generated by AgentOS

---

## 1) Purpose
This guide defines **how we write and structure** AgentOS templates and the files generated from them, so:
- agents can orient instantly (low ambiguity, low token waste)
- humans can skim quickly (predictable structure)
- repos remain consistent across many projects

---

## 2) Core principles

### 2.1 Agent-first clarity
- Every folder has a reason to exist.
- Every `agent.md` answers: **What do I own? What do I produce? Where do I read/write? When am I done?**

### 2.2 Minimalism with outcomes
- Prefer **checklists, bullets, and “deliverables”** over prose.
- Avoid “explaining for its own sake.” Explain only what changes decisions.

### 2.3 Single source of truth
- Product intent lives in `docs/PRD.md`.
- Architecture intent lives in `docs/Architecture.md`.
- Directory ownership lives in each folder’s `agent.md`.
- Avoid duplicating the same rules across files; link instead.

### 2.4 Deterministic structure
- Two different projects using the same preset should look familiar.
- Only add folders when they carry an ownership boundary or a build-time need.

---

## 3) Information architecture for generated projects

### 3.1 Required top-level conventions
- `README.md` — human onboarding + “how to run/build”
- `docs/` — product + technical docs
- `scripts/` — internal tooling (scaffold helpers, CI scripts)
- Feature code folders (`frontend/`, `backend/`, `src/`, etc.) per preset
- `tests/` (or `qa/`) — tests + validation notes

### 3.2 Docs folder conventions
`docs/` should contain:
- `PRD.md` — what we’re building and why
- `Roadmap.md` — sequence of work and milestones
- `Architecture.md` — high-level system design, boundaries, key decisions
- `QA-Plan.md` — what “done” means and how we verify it
- Optional:
  - `API.md` (contracts)
  - `Data-Model.md`
  - `Risk-Register.md`

---

## 4) Writing style rules (all docs)

### 4.1 Tone
- Direct, operational, no hype.
- If a line doesn’t change action, delete it.

### 4.2 Formatting
- Use **H1** for doc title, **H2** for major sections, **H3** for subsections.
- Keep headings short and “noun-like”: “Requirements”, “Risks”, “Acceptance Criteria”.
- Prefer numbered lists for sequences, bullets for sets.

### 4.3 Definitions
- Define acronyms once in a “Glossary” section *or* inline on first use.
- Be consistent: choose one term (“scaffolder” vs “generator”) and stick to it.

### 4.4 Scope control
- For each doc, include:
  - **In scope**
  - **Out of scope**
- This prevents agent drift.

---

## 5) `agent.md` design standard

### 5.1 Required sections (exact order)
Every directory-level `agent.md` must include:

1. **Mission**
2. **Inputs**
3. **Outputs**
4. **Rules**
5. **Definition of Done**
6. **Next Actions**

### 5.2 Required content rules
- **Mission:** 1–3 bullets max. Must state ownership boundary.
- **Inputs:** explicit file paths (relative) whenever possible.
- **Outputs:** explicit file paths + “format” (e.g., `docs/Architecture.md` in Markdown).
- **Rules:** include “do not touch” and “allowed touch” boundaries.
- **DoD:** must be verifiable (file exists, tests pass, checklist completed).
- **Next Actions:** 3–7 bullets, ordered by dependency.

### 5.3 Token discipline for agents
Include a short rule such as:
- “Prefer minimal diffs. Avoid rewriting whole files unless required.”
- “Ask at most 2 clarifying questions; otherwise make reasonable assumptions and proceed.”

### 5.4 Minimal `agent.md` template
```md
# Agent Guide — {DIR_NAME}

## Mission
- …

## Inputs
- …

## Outputs
- …

## Rules
- …

## Definition of Done
- [ ] …

## Next Actions
1. …
2. …
```

---

## 6) Template conventions (AgentOS)

### 6.1 Template folder layout
- `templates/common/` — shared files used across presets
- `templates/presets/<preset>/` — the preset’s tree and files
- Prefer “copy as-is” templates over generating content in code.

### 6.2 Placeholders
- Use double braces: `{{PLACEHOLDER}}`
- Keep placeholder names **UPPER_SNAKE_CASE**
- Common placeholders:
  - `{{PROJECT_NAME}}`
  - `{{PROJECT_GOAL}}`
  - `{{PRESET}}`
  - `{{STACK}}`
  - `{{AGENTS}}`
  - `{{DATE}}`

### 6.3 Placeholder safety
- Templates must still read sensibly if placeholders are not yet filled.
- Don’t embed placeholders in code identifiers unless the generator guarantees safe formatting.

### 6.4 Template version header (recommended)
At the top of long templates:
- `Template version: x.y`
- `Last updated: YYYY-MM-DD`

---

## 7) Naming and structure rules

### 7.1 Folder names
- Lowercase, hyphen-free unless needed (`frontend`, `backend`, `workflows`)
- Prefer canonical names across projects:
  - `docs`, `scripts`, `tests`, `design`, `shared`, `src`

### 7.2 File names
- Markdown docs: `Title-Case-With-Dashes.md` *or* `Title.md` (pick one per preset and be consistent)
- For core docs, keep these exact names:
  - `PRD.md`, `Roadmap.md`, `Architecture.md`, `QA-Plan.md`

### 7.3 Checklists
- Use `- [ ]` checkboxes for acceptance criteria and DoD.
- Keep each item testable.

---

## 8) UX / UI design guidance for “app” preset projects
(Used when generating a product app project repo, not the scaffolder itself.)

### 8.1 Design artifacts to include
In `design/`:
- `Design-Brief.md` — intent, users, constraints
- `User-Flows.md` — top flows, edge cases
- `Component-Inventory.md` — UI building blocks + states
- Optional: `Copy-Tone.md` — writing style and microcopy rules

### 8.2 Interaction rules
- Default to **progressive disclosure**: show basics, let users expand.
- Prefer “Explain → Example → Next step” in UI content.
- Always include:
  - Empty states
  - Loading states
  - Error states with recovery

### 8.3 Accessibility baseline
- Keyboard navigable flows
- Clear focus styles (design spec)
- Contrast compliance target: WCAG AA (document exceptions)
- Text alternatives for icons and charts

---

## 9) QA/Validation guide (doc style)
In `docs/QA-Plan.md`:
- Define test levels:
  - Unit, integration, E2E, manual
- Add “Definition of Done” gates:
  - [ ] Build passes
  - [ ] Lint passes
  - [ ] Tests pass
  - [ ] Core flows validated

---

## 10) “What to do when you need a new file”
Decision tree:
1. Can an existing file be extended without bloating? → extend.
2. Does the content define ownership, boundary, or verification? → new file ok.
3. Is it repeating another doc? → link instead of copy.

---

## 11) Review checklist (for template PRs)

### 11.1 Structure
- [ ] Preset creates a sensible minimal tree
- [ ] Every directory has ownership (via `agent.md` or obvious code ownership)

### 11.2 Content quality
- [ ] `agent.md` follows required section order
- [ ] DoD is verifiable
- [ ] “Next Actions” are dependency-ordered

### 11.3 Consistency
- [ ] File names match conventions
- [ ] Placeholders consistent and documented
- [ ] No duplicated sources of truth

---

## 12) Appendix — example snippet for a directory `agent.md`
```md
# Agent Guide — frontend/

## Mission
- Implement the UI per `design/` docs and `docs/PRD.md`.
- Keep UI logic in `frontend/`; do not modify backend contracts without updating `docs/API.md`.

## Inputs
- docs/PRD.md
- docs/Architecture.md
- design/User-Flows.md
- design/Component-Inventory.md

## Outputs
- frontend/src/** (UI code)
- docs/QA-Plan.md (update test notes for UI flows if needed)

## Rules
- Do not change backend DB schema.
- Prefer small diffs; avoid large refactors until core flows work.

## Definition of Done
- [ ] Core flows render and work with mock or real API
- [ ] Basic accessibility checks done (keyboard + focus)
- [ ] Tests for critical components exist

## Next Actions
1. Implement core navigation + layout shell
2. Implement primary flow #1 end-to-end
3. Add empty/loading/error states
```
